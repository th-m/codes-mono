{
  "resolvedId": "/Users/thom/Sites/th-m/th-m.codes.mono/apps/home/src/routes/(auth)/login.tsx",
  "transforms": [
    {
      "name": "vite:load-fallback",
      "result": "import { A, useLocation } from \"solid-start\";\nimport { createServerAction$, json, redirect } from \"solid-start/server\";\nimport { createUserSession } from \"~/models/session.server\";\nimport { createUser, verifyLogin } from \"~/models/users.server\";\n\nexport default function Login() {\n    const [login, { Form }] = createServerAction$(\n      async (form: FormData, { request }) => {\n        const email = form.get(\"email\") as string;\n        const password = form.get(\"password\") as string;\n        const remember = form.get(\"remember\") as string;\n        const redirectTo = (form?.get(\"redirectTo\") ?? \"/\") as string;\n        const errors = {\n          email: \"\",\n          password: \"\",\n        };\n        if (!password || password.length < 6) {\n          errors.password = \"Password must be at least 6 characters long\";\n        }\n        if (!email) {\n          errors.email = \"Email is required\";\n        }\n  \n        if (errors.email || errors.password) {\n          return  json({ errors },{ status: 400 });\n        }\n       \n        const session = await verifyLogin(email, password);\n        if (!session) {\n          errors.email = 'Invalid email or password';\n          return  json({ errors },{ status: 400 });\n        }\n        \n     \n        return createUserSession({\n          request,\n           session,\n          remember: remember === 'on' ? true : false,\n          redirectTo: redirectTo ,\n        });\n      }\n    );\n  const location = useLocation();\n  const redirectPath = location.query.redirectTo ?? \"/\";\n\n  // @ts-ignore\n  const errors = login?.result?.errors as\n    | {\n        email: string;\n        password: string;\n      }\n    | undefined;\n\n  return (\n    <div>\n      <div>\n        <Form method=\"post\" noValidate>\n          <div>\n            <label for=\"email\">\n              <div>Email Address</div>\n              {errors?.email && (\n                <div class=\"error small\" id=\"email-error\">\n                  {errors?.email}\n                </div>\n              )}\n            </label>\n            <input\n              type=\"email\"\n              name=\"email\"\n              id=\"email\"\n              aria-invalid={errors?.email ? true : false}\n              aria-describedby=\"email-error\"\n              aria-autocomplete=\"inline\"\n            />\n          </div>\n          <div>\n            <label for=\"password\">\n              <div>Password</div>\n              <div class=\"small\">Must have at least 6 characters.</div>\n              {errors?.password && (\n                <div class=\"error small\" id=\"password-error\">\n                  {errors?.password}\n                </div>\n              )}\n            </label>\n            <input\n              id=\"password\"\n              type=\"password\"\n              name=\"password\"\n              aria-autocomplete=\"inline\"\n              aria-invalid={errors?.password ? true : false}\n              aria-describedby=\"password-error\"\n            />\n          </div>\n          <button type=\"submit\">Log in</button>\n          <input type=\"hidden\" name=\"redirectTo\" value={redirectPath} />\n          <div>\n            <div>\n              <input id=\"remember\" name=\"remember\" type=\"checkbox\" />\n              <label for=\"remember\">Remember me</label>\n            </div>\n            <div class=\"light\">\n              <span class=\"small\">Already have an account? </span>\n              <A href=\"/sign-up\">sign up</A>\n            </div>\n          </div>\n        </Form>\n      </div>\n    </div>\n  );\n}\n",
      "start": 1685060494029,
      "end": 1685060494091
    },
    {
      "name": "solid-start-file-system-router",
      "result": "import { createComponent as _$createComponent } from \"solid-js/web\";\nimport { ssr as _$ssr } from \"solid-js/web\";\nimport { ssrAttribute as _$ssrAttribute } from \"solid-js/web\";\nimport { escape as _$escape } from \"solid-js/web\";\nimport { ssrHydrationKey as _$ssrHydrationKey } from \"solid-js/web\";\nconst _tmpl$ = [\"<div\", \"><label for=\\\"email\\\"><div>Email Address</div><!--#-->\", \"<!--/--></label><input type=\\\"email\\\" name=\\\"email\\\" id=\\\"email\\\"\", \" aria-describedby=\\\"email-error\\\" aria-autocomplete=\\\"inline\\\"></div>\"],\n  _tmpl$2 = [\"<div\", \"><label for=\\\"password\\\"><div>Password</div><div class=\\\"small\\\">Must have at least 6 characters.</div><!--#-->\", \"<!--/--></label><input id=\\\"password\\\" type=\\\"password\\\" name=\\\"password\\\" aria-autocomplete=\\\"inline\\\"\", \" aria-describedby=\\\"password-error\\\"></div>\"],\n  _tmpl$3 = [\"<button\", \" type=\\\"submit\\\">Log in</button>\"],\n  _tmpl$4 = [\"<input\", \" type=\\\"hidden\\\" name=\\\"redirectTo\\\"\", \">\"],\n  _tmpl$5 = [\"<div\", \"><div><input id=\\\"remember\\\" name=\\\"remember\\\" type=\\\"checkbox\\\"><label for=\\\"remember\\\">Remember me</label></div><div class=\\\"light\\\"><span class=\\\"small\\\">Already have an account? </span><!--#-->\", \"<!--/--></div></div>\"],\n  _tmpl$6 = [\"<div\", \"><div>\", \"</div></div>\"],\n  _tmpl$7 = [\"<div\", \" class=\\\"error small\\\" id=\\\"email-error\\\">\", \"</div>\"],\n  _tmpl$8 = [\"<div\", \" class=\\\"error small\\\" id=\\\"password-error\\\">\", \"</div>\"];\nimport \"solid-start/data\";\nimport { createRouteAction } from \"solid-start/data\";\nimport server$ from \"solid-start/server\";\nimport { A, useLocation } from \"solid-start\";\nimport { json } from \"solid-start/server\";\nimport { createUserSession } from \"~/models/session.server\";\nimport { verifyLogin } from \"~/models/users.server\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(form, {\n  request\n}) {\n  const $$ctx = this;\n  const email = form.get(\"email\");\n  const password = form.get(\"password\");\n  const remember = form.get(\"remember\");\n  const redirectTo = form?.get(\"redirectTo\") ?? \"/\";\n  const errors = {\n    email: \"\",\n    password: \"\"\n  };\n  if (!password || password.length < 6) {\n    errors.password = \"Password must be at least 6 characters long\";\n  }\n  if (!email) {\n    errors.email = \"Email is required\";\n  }\n  if (errors.email || errors.password) {\n    return json({\n      errors\n    }, {\n      status: 400\n    });\n  }\n  const session = await verifyLogin(email, password);\n  if (!session) {\n    errors.email = 'Invalid email or password';\n    return json({\n      errors\n    }, {\n      status: 400\n    });\n  }\n  return createUserSession({\n    request,\n    session,\n    remember: remember === 'on' ? true : false,\n    redirectTo: redirectTo\n  });\n}, \"/_m/583741b71d/login\", true);\nserver$.registerHandler(\"/_m/583741b71d/login\", $$server_module0);\nexport default function Login() {\n  const [login, {\n    Form\n  }] = createRouteAction($$server_module0);\n  const location = useLocation();\n  const redirectPath = location.query.redirectTo ?? \"/\";\n\n  // @ts-ignore\n  const errors = login?.result?.errors;\n  return _$ssr(_tmpl$6, _$ssrHydrationKey(), _$escape(_$createComponent(Form, {\n    method: \"post\",\n    noValidate: true,\n    get children() {\n      return [_$ssr(_tmpl$, _$ssrHydrationKey(), errors?.email && _$ssr(_tmpl$7, _$ssrHydrationKey(), _$escape(errors?.email)), _$ssrAttribute(\"aria-invalid\", errors?.email ? _$escape(true, true) : _$escape(false, true), false)), _$ssr(_tmpl$2, _$ssrHydrationKey(), errors?.password && _$ssr(_tmpl$8, _$ssrHydrationKey(), _$escape(errors?.password)), _$ssrAttribute(\"aria-invalid\", errors?.password ? _$escape(true, true) : _$escape(false, true), false)), _$ssr(_tmpl$3, _$ssrHydrationKey()), _$ssr(_tmpl$4, _$ssrHydrationKey(), _$ssrAttribute(\"value\", _$escape(redirectPath, true), false)), _$ssr(_tmpl$5, _$ssrHydrationKey(), _$escape(_$createComponent(A, {\n        href: \"/sign-up\",\n        children: \"sign up\"\n      })))];\n    }\n  })));\n}",
      "start": 1685060494091,
      "end": 1685060494101,
      "order": "pre"
    },
    {
      "name": "solid",
      "result": "import { createComponent as _$createComponent } from \"solid-js/web\";\nimport { ssr as _$ssr } from \"solid-js/web\";\nimport { ssrAttribute as _$ssrAttribute } from \"solid-js/web\";\nimport { escape as _$escape } from \"solid-js/web\";\nimport { ssrHydrationKey as _$ssrHydrationKey } from \"solid-js/web\";\nconst _tmpl$ = [\"<div\", \"><label for=\\\"email\\\"><div>Email Address</div><!--#-->\", \"<!--/--></label><input type=\\\"email\\\" name=\\\"email\\\" id=\\\"email\\\"\", \" aria-describedby=\\\"email-error\\\" aria-autocomplete=\\\"inline\\\"></div>\"],\n  _tmpl$2 = [\"<div\", \"><label for=\\\"password\\\"><div>Password</div><div class=\\\"small\\\">Must have at least 6 characters.</div><!--#-->\", \"<!--/--></label><input id=\\\"password\\\" type=\\\"password\\\" name=\\\"password\\\" aria-autocomplete=\\\"inline\\\"\", \" aria-describedby=\\\"password-error\\\"></div>\"],\n  _tmpl$3 = [\"<button\", \" type=\\\"submit\\\">Log in</button>\"],\n  _tmpl$4 = [\"<input\", \" type=\\\"hidden\\\" name=\\\"redirectTo\\\"\", \">\"],\n  _tmpl$5 = [\"<div\", \"><div><input id=\\\"remember\\\" name=\\\"remember\\\" type=\\\"checkbox\\\"><label for=\\\"remember\\\">Remember me</label></div><div class=\\\"light\\\"><span class=\\\"small\\\">Already have an account? </span><!--#-->\", \"<!--/--></div></div>\"],\n  _tmpl$6 = [\"<div\", \"><div>\", \"</div></div>\"],\n  _tmpl$7 = [\"<div\", \" class=\\\"error small\\\" id=\\\"email-error\\\">\", \"</div>\"],\n  _tmpl$8 = [\"<div\", \" class=\\\"error small\\\" id=\\\"password-error\\\">\", \"</div>\"];\nimport \"solid-start/data\";\nimport { createRouteAction } from \"solid-start/data\";\nimport server$ from \"solid-start/server\";\nimport { A, useLocation } from \"solid-start\";\nimport { json } from \"solid-start/server\";\nimport { createUserSession } from \"~/models/session.server\";\nimport { verifyLogin } from \"~/models/users.server\";\nconst $$server_module0 = server$.createHandler(async function $$serverHandler0(form, {\n  request\n}) {\n  const $$ctx = this;\n  const email = form.get(\"email\");\n  const password = form.get(\"password\");\n  const remember = form.get(\"remember\");\n  const redirectTo = form?.get(\"redirectTo\") ?? \"/\";\n  const errors = {\n    email: \"\",\n    password: \"\"\n  };\n  if (!password || password.length < 6) {\n    errors.password = \"Password must be at least 6 characters long\";\n  }\n  if (!email) {\n    errors.email = \"Email is required\";\n  }\n  if (errors.email || errors.password) {\n    return json({\n      errors\n    }, {\n      status: 400\n    });\n  }\n  const session = await verifyLogin(email, password);\n  if (!session) {\n    errors.email = 'Invalid email or password';\n    return json({\n      errors\n    }, {\n      status: 400\n    });\n  }\n  return createUserSession({\n    request,\n    session,\n    remember: remember === 'on' ? true : false,\n    redirectTo: redirectTo\n  });\n}, \"/_m/583741b71d/login\", true);\nserver$.registerHandler(\"/_m/583741b71d/login\", $$server_module0);\nexport default function Login() {\n  const [login, {\n    Form\n  }] = createRouteAction($$server_module0);\n  const location = useLocation();\n  const redirectPath = location.query.redirectTo ?? \"/\";\n\n  // @ts-ignore\n  const errors = login?.result?.errors;\n  return _$ssr(_tmpl$6, _$ssrHydrationKey(), _$escape(_$createComponent(Form, {\n    method: \"post\",\n    noValidate: true,\n    get children() {\n      return [_$ssr(_tmpl$, _$ssrHydrationKey(), errors?.email && _$ssr(_tmpl$7, _$ssrHydrationKey(), _$escape(errors?.email)), _$ssrAttribute(\"aria-invalid\", errors?.email ? _$escape(true, true) : _$escape(false, true), false)), _$ssr(_tmpl$2, _$ssrHydrationKey(), errors?.password && _$ssr(_tmpl$8, _$ssrHydrationKey(), _$escape(errors?.password)), _$ssrAttribute(\"aria-invalid\", errors?.password ? _$escape(true, true) : _$escape(false, true), false)), _$ssr(_tmpl$3, _$ssrHydrationKey()), _$ssr(_tmpl$4, _$ssrHydrationKey(), _$ssrAttribute(\"value\", _$escape(redirectPath, true), false)), _$ssr(_tmpl$5, _$ssrHydrationKey(), _$escape(_$createComponent(A, {\n        href: \"/sign-up\",\n        children: \"sign up\"\n      })))];\n    }\n  })));\n}",
      "start": 1685060494101,
      "end": 1685060494104,
      "order": "pre"
    }
  ]
}
